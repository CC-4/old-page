<!doctype html><html lang=es class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content=Compiladores><link href=https://cc-4.github.io/labs/lab04/ rel=canonical><meta name=author content=CC-4><meta name=lang:clipboard.copy content="Copiar al portapapeles"><meta name=lang:clipboard.copied content="Copiado al portapapeles"><meta name=lang:search.language content=es><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No se encontraron documentos"><meta name=lang:search.result.one content="1 documento encontrado"><meta name=lang:search.result.other content="# documentos encontrados"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../icon.png><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.2"><title>Laboratorio 4 (JCup) - CC-4</title><link rel=stylesheet href=../../assets/stylesheets/application.30686662.css><link rel=stylesheet href=../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content><script src=../../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css><link rel=stylesheet href=../../css/kbd.css><link rel=stylesheet href=../../css/custom.css></head> <body dir=ltr data-md-color-primary=white data-md-color-accent=blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#conociendo-cup tabindex=1 class=md-skip> Saltar a contenido </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://cc-4.github.io/ title=CC-4 class="md-header-nav__button md-logo"> <img src=../../icon.png width=24 height=24> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> CC-4 </span> <span class=md-header-nav__topic> Laboratorio 4 (JCup) </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query placeholder=Búsqueda autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Teclee para comenzar búsqueda </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/CC-4/CC-4/ title="Ir al repositorio" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> CC-4/CC-4 </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://cc-4.github.io/ title=CC-4 class="md-nav__button md-logo"> <img src=../../icon.png width=48 height=48> </a> CC-4 </label> <div class=md-nav__source> <a href=https://github.com/CC-4/CC-4/ title="Ir al repositorio" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> CC-4/CC-4 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Inicio class=md-nav__link> Inicio </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> Laboratorios </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Laboratorios </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../lab01/ title="Laboratorio 1 (COOL)" class=md-nav__link> Laboratorio 1 (COOL) </a> </li> <li class=md-nav__item> <a href=../lab02/ title="Laboratorio 2 (Lexer)" class=md-nav__link> Laboratorio 2 (Lexer) </a> </li> <li class=md-nav__item> <a href=../lab03/ title="Laboratorio 3 (RDP)" class=md-nav__link> Laboratorio 3 (RDP) </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Laboratorio 4 (JCup) </label> <a href=./ title="Laboratorio 4 (JCup)" class="md-nav__link md-nav__link--active"> Laboratorio 4 (JCup) </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Tabla de contenidos</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#1-introduccion class=md-nav__link> 1. Introducción </a> </li> <li class=md-nav__item> <a href=#2-lexer class=md-nav__link> 2. Lexer </a> </li> <li class=md-nav__item> <a href=#3-parser class=md-nav__link> 3. Parser </a> </li> <li class=md-nav__item> <a href=#referencias class=md-nav__link> Referencias </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../lab05/ title="Laboratorio 5 (ST)" class=md-nav__link> Laboratorio 5 (ST) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Proyectos </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> Proyectos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../projects/proj00/ title="Instalación de Material" class=md-nav__link> Instalación de Material </a> </li> <li class=md-nav__item> <a href=../../projects/proj01/ title="Análisis Léxico" class=md-nav__link> Análisis Léxico </a> </li> <li class=md-nav__item> <a href=../../projects/proj02/ title="Análisis Sintáctico" class=md-nav__link> Análisis Sintáctico </a> </li> <li class=md-nav__item> <a href=../../projects/proj03/ title="Análisis Semántico" class=md-nav__link> Análisis Semántico </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Tabla de contenidos</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#1-introduccion class=md-nav__link> 1. Introducción </a> </li> <li class=md-nav__item> <a href=#2-lexer class=md-nav__link> 2. Lexer </a> </li> <li class=md-nav__item> <a href=#3-parser class=md-nav__link> 3. Parser </a> </li> <li class=md-nav__item> <a href=#referencias class=md-nav__link> Referencias </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/CC-4/CC-4/edit/master/docs/labs/lab04.md title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=conociendo-cup>Conociendo Cup<a class=headerlink href=#conociendo-cup title="Permanent link">&para;</a></h1> <p align=center> <img src=/img/cup_logo.gif alt=JCup> </p> <p>En este laboratorio aprenderán a utilizar JCup, el analizador sintáctico que utilizarán en la fase 2 de su proyecto.</p> <h2 id=1-introduccion>1. Introducción<a class=headerlink href=#1-introduccion title="Permanent link">&para;</a></h2> <p>Descarguen todos los archivos del siguiente repositorio:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>https://classroom.github.com/a/RYr4XVtS</pre></div> </td></tr></table> <p>Ahora que han terminado la fase 1 de su proyecto, saben utilizar JLex para el análisis léxico de una cadena de caracteres. Como han visto en clase, el análisis sintáctico se basa en gramáticas, y tiene algoritmos muy bien definidos para poder ser implementado. Para prepararlos para la fase 2, utilizaremos una herramienta llamada JCup, que funciona para analizar la sintáxis de un texto dado.</p> <p>Al igual que JLex, JCup cuenta con una sección en donde se colocan las funciones que posteriormente se copiarán en la clase generada, en este laboratorio no utilizaremos esta funcionalidad, pero les será útil para su proyecto. Luego existe una lista de símbolos terminales, como los paréntesis, los dígitos, etc., seguido de una lista de símbolos no terminales. Tanto los símbolos terminales como los no terminales pueden tener un tipo definido:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>terminal</span> <span class=n>PLUS</span><span class=o>,</span> <span class=n>MINUS</span><span class=o>,</span> <span class=n>MULT</span><span class=o>;</span>
<span class=n>terminal</span> <span class=n>Integer</span> <span class=n>INTEGER</span><span class=o>;</span>
<span class=n>terminal</span> <span class=n>Float</span> <span class=n>FLOAT</span><span class=o>;</span>
</pre></div> </td></tr></table> <p>Luego pueden especificar una precedencia. Por ejemplo, una multiplicación se debe hacer antes que una suma. Para este tipo de precedencia deben emplear "precedence left", como en el siguiente ejemplo:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>precedence</span> <span class=n>left</span> <span class=n>PLUS</span><span class=o>,</span> <span class=n>MINUS</span><span class=o>;</span>
<span class=n>precedence</span> <span class=n>left</span> <span class=n>TIMES</span><span class=o>;</span>
</pre></div> </td></tr></table> <p>Seguido de eso, van todas las reglas de producción. Siguiendo la siguiente sintáxis, en donde <code>RESULT</code> es la derivación usando bottom-up parsing.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>parent_expr</span> <span class=o>::=</span> <span class=n>LPAREN</span> <span class=n>expr</span><span class=o>:</span><span class=n>e</span> <span class=n>RPAREN</span> <span class=o>{:</span> <span class=n>RESULT</span> <span class=o>=</span> <span class=n>e</span><span class=o>;</span> <span class=o>:};</span>
</pre></div> </td></tr></table> <h2 id=2-lexer>2. Lexer<a class=headerlink href=#2-lexer title="Permanent link">&para;</a></h2> <p>La gramática con la que trabajaremos es la siguiente:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class=code><div class=codehilite><pre><span></span>S         ::<span class=o>=</span> S expr_part
          <span class=p>|</span>   expr_part
expr_part ::<span class=o>=</span> expr <span class=p>;</span>
expr      ::<span class=o>=</span> exprI <span class=p>|</span> exprF
exprI     ::<span class=o>=</span> I + I
          <span class=p>|</span>   I - I
          <span class=p>|</span>   I * I
          <span class=p>|</span>   I / I
          <span class=p>|</span>   I % I
          <span class=p>|</span>   <span class=o>(</span>I<span class=o>)</span>
exprF     ::<span class=o>=</span> I + F
          <span class=p>|</span>   F + I
          <span class=p>|</span>   F + F
          <span class=p>|</span>   I - F
          <span class=p>|</span>   F - I
          <span class=p>|</span>   F - F
          <span class=p>|</span>   I * F
          <span class=p>|</span>   F * I
          <span class=p>|</span>   F * F
          <span class=p>|</span>   I / F
          <span class=p>|</span>   F / I
          <span class=p>|</span>   F / F
          <span class=p>|</span>   I ^ F
          <span class=p>|</span>   F ^ I
          <span class=p>|</span>   F ^ F
          <span class=p>|</span>   sin I
          <span class=p>|</span>   sin F
          <span class=p>|</span>   cos I
          <span class=p>|</span>   cos F
          <span class=p>|</span>   tan I
          <span class=p>|</span>   tan F
          <span class=p>|</span>   <span class=o>(</span>F<span class=o>)</span>

<span class=c1># donde I es un entero y F es un float.</span>
</pre></div> </td></tr></table> <p>Para la primer parte deben completar el archivo <strong>calculator.lex</strong> generando los tokens necesarios para una calculadora con operaciones básicas y que maneje tanto floats como enteros. Noten que las funciones trigonométricas no son case sensitive, por lo que "sin" y "sIN" son aceptadas de igual manera. Esta es la lista de tokens que debe tener:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class=code><div class=codehilite><pre><span></span>SEMI
PLUS
MINUS
TIMES
DIVI
LPAREN
RPAREN
POW
REM
SIN
COS
TAN
INTEGER
FLOAT
</pre></div> </td></tr></table> <p>Si analizan la gramática, pueden ver que una expresión puede ser una expresión entera, o una expresión de punto flotante. Más adelante verán que esta gramática se puede simplificar dejando la distinción entre enteros y floats al analizador semántico.</p> <h2 id=3-parser>3. Parser<a class=headerlink href=#3-parser title="Permanent link">&para;</a></h2> <p>Para la segunda parte, ustedes deben completar el archivo <strong>calculator.cup</strong>, agregando las reglas de derivación bottom-up. Pueden agregar tantos símbolos no terminales como quieran, pero no pueden modificar ninguno de los símbolos terminales. Una vez agregadas todas las reglas de derivación, pueden compilar su archivo de la siguiente manera:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>sh make.sh
</pre></div> </td></tr></table> <p>y para correrlo:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>sh calculator.sh
</pre></div> </td></tr></table> <p>Así se deberá de ver al probarlo:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=m>2</span> + <span class=m>2</span><span class=p>;</span>
<span class=o>=</span> <span class=m>4</span><span class=p>;</span>
<span class=m>4</span> * cos<span class=o>(</span><span class=m>0</span>.41e1 ^ <span class=m>2</span><span class=o>)</span><span class=p>;</span>
<span class=o>=</span> -1.807120<span class=p>;</span>
</pre></div> </td></tr></table> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Noten que el argumento de las funciones trigonométricas está en radianes.</p> </div> <p>Una vez terminado, tienen que realizar un commit de los archivos .cup y .lex y subir al GES el link de su repositorio.</p> <h2 id=referencias>Referencias<a class=headerlink href=#referencias title="Permanent link">&para;</a></h2> <div class=footnote> <hr> <ol> <li id=fn:1> <p><a href=http://www2.cs.tum.edu/projects/cup/manual.html>JCup Manual</a> - Manual de JCup&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> <li id=fn:2> <p><a href=http://web.stanford.edu/class/cs143/javadoc/java_cup/index.html>JCup Java Manual</a> - Javadoc de JCup&#160;<a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">&#8617;</a></p> </li> </ol> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../lab03/ title="Laboratorio 3 (RDP)" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Anterior </span> Laboratorio 3 (RDP) </span> </div> </a> <a href=../lab05/ title="Laboratorio 5 (ST)" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Siguiente </span> Laboratorio 5 (ST) </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2015-2019 CC-4 UG </div> Last Commit: bf4ee6f6 (andrescv) </div> <div class=md-footer-social> <link rel=stylesheet href=../../assets/fonts/font-awesome.css> <a href=https://github.com/cc-3/MachineStructures class="md-footer-social__link fa fa-github"></a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.c648116f.js></script> <script src=../../assets/javascripts/lunr/lunr.stemmer.support.js></script> <script src=../../assets/javascripts/lunr/lunr.es.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script> <script src=../../js/latex.js></script> </body> </html>
