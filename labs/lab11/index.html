



<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="CC4 Compiladores - Universidad Galileo">
      
      
        <link rel="canonical" href="https://cc-4.github.io/laboratorios/lab-11-optimizaciones/">
      
      
        <meta name="author" content="CC-4">
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.2.0">
    
    
      
        <title>Optimizaciones</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.572ca0f0.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.8c900955.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../stylesheets/emoji.css">
    
      <link rel="stylesheet" href="../../stylesheets/kbd.css">
    
      <link rel="stylesheet" href="../../convnet_demo/style.css">
    
      <link rel="stylesheet" href="../../stylesheets/button.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#lab-11-40optimizaciones41" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://cc-4.github.io/" title="Compiladores" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Compiladores
              </span>
              <span class="md-header-nav__topic">
                Lab 11 (Optimizaciones)
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/CC-4/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      cc-4
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://cc-4.github.io/" title="Compiladores" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Compiladores
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/CC-4/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      cc-4
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Inicio" class="md-nav__link">
      Inicio
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Laboratorios
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Laboratorios
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../untitled/" title="Lab 1 (COOL)" class="md-nav__link">
      Lab 1 (COOL)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-2/" title="Lab 2 (Lexer)" class="md-nav__link">
      Lab 2 (Lexer)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-3/" title="Lab 3 (RDP)" class="md-nav__link">
      Lab 3 (RDP)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-4/" title="Lab 4 (JCUP)" class="md-nav__link">
      Lab 4 (JCUP)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-5/" title="Lab 5 (Symbol Table)" class="md-nav__link">
      Lab 5 (Symbol Table)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-6-analisis-semantico-i/" title="Lab 6 (Análisis Semántico I)" class="md-nav__link">
      Lab 6 (Análisis Semántico I)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-7-analisis-semantico-ii/" title="Lab 7 (Análisis Semántico II)" class="md-nav__link">
      Lab 7 (Análisis Semántico II)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-8-risc-v/" title="Lab 8 (RISC-V)" class="md-nav__link">
      Lab 8 (RISC-V)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-9-codegen/" title="Lab 9 (CodeGen I)" class="md-nav__link">
      Lab 9 (CodeGen I)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-10-codegen-ii/" title="Lab 10 (CodeGen II)" class="md-nav__link">
      Lab 10 (CodeGen II)
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Lab 11 (Optimizaciones)
      </label>
    
    <a href="./" title="Lab 11 (Optimizaciones)" class="md-nav__link md-nav__link--active">
      Lab 11 (Optimizaciones)
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduccion" title="1. Introducción" class="md-nav__link">
    1. Introducción
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-descripcion" title="2. Descripción" class="md-nav__link">
    2. Descripción
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-constant-folding" title="3. Constant Folding" class="md-nav__link">
    3. Constant Folding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-autograder" title="4. Autograder" class="md-nav__link">
    4. Autograder
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Proyectos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Proyectos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../proyectos/instalacion-material/" title="Instalación Material" class="md-nav__link">
      Instalación Material
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../proyectos/analisis-lexico/" title="Análisis Léxico" class="md-nav__link">
      Análisis Léxico
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../proyectos/analisis-sintactico/" title="Análisis Sintáctico" class="md-nav__link">
      Análisis Sintáctico
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../proyectos/analisis-semantico/" title="Análisis Semántico" class="md-nav__link">
      Análisis Semántico
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../proyectos/generacion-de-codigo/" title="Generación de Código" class="md-nav__link">
      Generación de Código
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-introduccion" title="1. Introducción" class="md-nav__link">
    1. Introducción
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-descripcion" title="2. Descripción" class="md-nav__link">
    2. Descripción
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-constant-folding" title="3. Constant Folding" class="md-nav__link">
    3. Constant Folding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-autograder" title="4. Autograder" class="md-nav__link">
    4. Autograder
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/CC-4/edit/master/page/es/docs/laboratorios/lab-11-optimizaciones.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="lab-11-40optimizaciones41">Lab 11 (Optimizaciones)<a class="headerlink" href="#lab-11-40optimizaciones41" title="Permanent link">&para;</a></h1>
<h2 id="1-introduccion">1. Introducción<a class="headerlink" href="#1-introduccion" title="Permanent link">&para;</a></h2>
<p>El objetivo de este laboratorio es preparar el <strong>AST</strong> para la generación de código, aplicandole la optimización de <strong>Constant Folding</strong>.</p>
<p>Antes de empezar, obtener los archivos desde Github Classroom:</p>
<div class="codehilite"><pre><span></span>https://classroom.github.com/a/8GC__yJ-
</pre></div>

<h2 id="2-descripcion">2. Descripción<a class="headerlink" href="#2-descripcion" title="Permanent link">&para;</a></h2>
<p>En lugar de generar código de forma directa, realizaremos una de las optimizaciones mas simples: aplicaremos <strong>Constant Folding</strong> a la gramatica empleada en el laboratorio anterior, la cual solo tiene definiciones de funciones, operaciones matematicas y condiciones. En los archivos que descargaron, se les proporciona el codigo base del <strong>lexer</strong>, <strong>parser</strong> y <strong>AST</strong> para que ustedes puedan agregar el código necesario para implementar las optimizaciones. Esta es la gramatica:</p>
<div class="codehilite"><pre><span></span>  P -&gt; D P | D
  D -&gt; def id(ARGS) = E;
  ARGS -&gt; id, ARGS | id | lambda
  E -&gt; int | id | if E = E then E else E | E + E | E - E | id(E,...,E)
</pre></div>

<h2 id="3-constant-folding">3. Constant Folding<a class="headerlink" href="#3-constant-folding" title="Permanent link">&para;</a></h2>
<p>Para poder realizar esta fase, ustedes deben recorrer el <strong>AST</strong> de forma similar a la fase de semant, y la de cgen. El archivo que deben modificar es <strong>cool-tree.java</strong>, en la clase <strong>Main</strong>. Ahi deben implementar el metodo llamado optimize, el cual es su punto de inicio. Ademas de esto, son libres de modificar cualquier otra clase que deseen, como hint, otra clase que les seria util, podria ser <strong>TreeNode.java</strong>. Una vez implementada la función, si tienen el siguiente fragmento de código:</p>
<div class="codehilite"><pre><span></span>  def foo() = 2 + 3
</pre></div>

<p>su programa debera optimizarlo, operando la suma y luego escribiendo una unica constante, de la siguente manera:</p>
<div class="codehilite"><pre><span></span>  def foo() = 5
</pre></div>

<p>tomen en cuenta que para las llamadas a funciones tambien pueden realizar optimizaciones:</p>
<div class="codehilite"><pre><span></span>  foo(2*i,3*3)
</pre></div>

<p>lo cual deberian cambiarlo a:</p>
<div class="codehilite"><pre><span></span>  foo(2*i,9)
</pre></div>

<p>El output de su código debe ser el <strong>AST</strong> optimizado por lo que las operaciones matemáticas entre constantes deben aparecer como una sola constante (usted no debe preocuparse por desplegar el <strong>AST</strong> esto ya lo hace el código que se le proporciona, usted solo debe modificar la estructura del <strong>AST</strong>).</p>
<h2 id="4-autograder">4. Autograder<a class="headerlink" href="#4-autograder" title="Permanent link">&para;</a></h2>
<p>Para comprobar que su código funciona correctamente, pueden escribir <strong>make check</strong>:</p>
<div class="codehilite"><pre><span></span>make check 
echo &#39;#!/bin/sh&#39; &gt;&gt; lab11
echo &#39;java -classpath /usr/class/cs143/cool/lib:.:/usr/java/lib/rt.jar:`dirname $0` Lab11 $*&#39; &gt;&gt; lab11
chmod 755 lab11
python grading.py
##################### Autograder #######################
       +0 (test3.test)
       +0 (test2.test)
       +0 (test5.test)
       +0 (test4.test)
       +0 (test1.test)

+------------------------------------------------------+
|                                            Score: 0/5|
+------------------------------------------------------+
</pre></div>

<p>Si desea probar unicamente un archivo, encuentra varios programas en la carpeta <strong>grading</strong>. Luego de hacer <strong>make</strong>, ejecute lo siguiente:</p>
<div class="codehilite"><pre><span></span>./lab11 grading/archivoDePrueba.test
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../lab-10-codegen-ii/" title="Lab 10 (CodeGen II)" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                Lab 10 (CodeGen II)
              </span>
            </div>
          </a>
        
        
          <a href="../../proyectos/instalacion-material/" title="Instalación Material" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Siguiente
                </span>
                Instalación Material
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            CC-4
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/CC-4" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b41f3d20.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../../assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="../../js/latex.js"></script>
      
        <script src="../../js/python.js"></script>
      
    
    
      
    
  </body>
</html>