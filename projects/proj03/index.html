



<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Compiladores">
      
      
        <link rel="canonical" href="https://cc-4.github.io/projects/proj03/">
      
      
        <meta name="author" content="CC-4">
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../icon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.2">
    
    
      
        <title>Análisis Semántico - CC-4</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../css/kbd.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#analisis-semantico" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://cc-4.github.io/" title="CC-4" class="md-header-nav__button md-logo">
          
            <img src="../../icon.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              CC-4
            </span>
            <span class="md-header-nav__topic">
              
                Análisis Semántico
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/cc-4/cc-4.github.io/" title="Ir al repositorio" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    cc-4/cc-4.github.io
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://cc-4.github.io/" title="CC-4" class="md-nav__button md-logo">
      
        <img src="../../icon.png" width="48" height="48">
      
    </a>
    CC-4
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/cc-4/cc-4.github.io/" title="Ir al repositorio" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    cc-4/cc-4.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Inicio" class="md-nav__link">
      Inicio
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Laboratorios
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Laboratorios
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../labs/lab01/" title="Laboratorio 1 (COOL)" class="md-nav__link">
      Laboratorio 1 (COOL)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../labs/lab02/" title="Laboratorio 2 (Lexer)" class="md-nav__link">
      Laboratorio 2 (Lexer)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../labs/lab03/" title="Laboratorio 3 (RDP)" class="md-nav__link">
      Laboratorio 3 (RDP)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../labs/lab04/" title="Laboratorio 4 (JCup)" class="md-nav__link">
      Laboratorio 4 (JCup)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../labs/lab05/" title="Laboratorio 5 (ST)" class="md-nav__link">
      Laboratorio 5 (ST)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Proyectos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Proyectos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../proj00/" title="Instalación de Material" class="md-nav__link">
      Instalación de Material
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../proj01/" title="Análisis Léxico" class="md-nav__link">
      Análisis Léxico
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../proj02/" title="Análisis Sintáctico" class="md-nav__link">
      Análisis Sintáctico
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Análisis Semántico
      </label>
    
    <a href="./" title="Análisis Semántico" class="md-nav__link md-nav__link--active">
      Análisis Semántico
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-archivos-y-directorios" class="md-nav__link">
    1. Archivos y Directorios
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-atravesar-el-ast" class="md-nav__link">
    2. Atravesar el AST
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-herencia" class="md-nav__link">
    3. Herencia
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-scopes-y-variables" class="md-nav__link">
    4. Scopes y Variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-verificacion-de-tipos" class="md-nav__link">
    5. Verificación de Tipos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-interfaz-con-codegen" class="md-nav__link">
    6. Interfaz con CodeGen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-salida-esperada" class="md-nav__link">
    7. Salida Esperada
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-probando-el-analizador" class="md-nav__link">
    8. Probando el Analizador
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-observaciones" class="md-nav__link">
    9. Observaciones
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-autograder" class="md-nav__link">
    10. Autograder
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencias" class="md-nav__link">
    Referencias
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-archivos-y-directorios" class="md-nav__link">
    1. Archivos y Directorios
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-atravesar-el-ast" class="md-nav__link">
    2. Atravesar el AST
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-herencia" class="md-nav__link">
    3. Herencia
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-scopes-y-variables" class="md-nav__link">
    4. Scopes y Variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-verificacion-de-tipos" class="md-nav__link">
    5. Verificación de Tipos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-interfaz-con-codegen" class="md-nav__link">
    6. Interfaz con CodeGen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-salida-esperada" class="md-nav__link">
    7. Salida Esperada
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-probando-el-analizador" class="md-nav__link">
    8. Probando el Analizador
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-observaciones" class="md-nav__link">
    9. Observaciones
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-autograder" class="md-nav__link">
    10. Autograder
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencias" class="md-nav__link">
    Referencias
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cc-4/cc-4.github.io/edit/master/docs/projects/proj03.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="analisis-semantico">Análisis Semántico<a class="headerlink" href="#analisis-semantico" title="Permanent link">&para;</a></h1>
<p align="center">
  <img src="/img/semant.png" alt="Semantic" width="200"/>
</p>

<p>En está asignación, ustedes van a implementar el análisis semántico para COOL. Ustedes van a utilizar el AST construido por el parser para verificar si el programa está correcto semánticamente siguiendo la especificación de COOL. Su analizador semántico debería de rechazar programas erroneos; para programas que estén correctos, debería de reunir información que va a ser utilizada por el generador de código. La salida del analizador semántico va a ser un AST anotado utilizado por su generador de código.</p>
<p>Esta asignación tiene más libertad para tomar decisiones de diseño que las últimas dos asignaciones. Su programa va a ser correcto si puede verificar programas reflejando la especificación. No hay una sola solución para esta asignación, pero hay muchas malas maneras de implementarla. Hay un número de practicas estándar que creemos que hacen la vida más fácil, y los vamos a tratar de inculcar estas prácticas en ustedes. Sin embargo, lo que ustedes hagan es su responsabilidad, cualquier cosa que ustedes decidan hacer, estén preparados para justificarla y explicarla.</p>
<p>Ustedes van a necesitar referirse a las reglas de inferencia de tipos descritas en el manual de referencia de COOL<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>. Ustedes también van a necesitar agregar métodos y atributos a los nodos del AST para esta fase. Las funciones que el paquete tree provee están documentadas en el Manual del código de soporte de COOL<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup>.</p>
<p>Hay mucha información en este documento, y ustedes necesitan saber la mayoría de esta información para crear un analizador semántico funcional. Por favor lean esta asignación detenida y cuidadosamente. A alto nivel, su analizador semántico debería de poder lograr las siguientes tareas:</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> Ver todas las clases y construir un grafo de herencia.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> Verificar que el grafo esté bien formado.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Para cada clase:<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> Atravesar el AST, reuniendo todas las declaraciones visibles en una tabla de símbolos.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> Verificar que los tipos de cada expresión sean correctos.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> Anotar el AST con tipos.</li>
</ul>
</li>
</ul>
<p>Esta lista de tareas podría no ser exhaustiva, es responsabilidad de ustedes de implementar la especificación descrita en el manual.</p>
<h2 id="1-archivos-y-directorios">1. Archivos y Directorios<a class="headerlink" href="#1-archivos-y-directorios" title="Permanent link">&para;</a></h2>
<p>Para empezar, creen el directorio <strong>PA3</strong> en su carpeta que contendrá todas las demás fases como se explicó <a href="/projects/proj00/">aquí</a> y dentro de esa carpeta en una terminal (<kbd>CTRL</kbd><kbd>+</kbd><kbd>T</kbd>) escriban lo siguiente:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>make -f /usr/class/cs143/assignments/PA4J/Makefile
</pre></div>
</td></tr></table>

<p>Este comando va a copiar un número de archivos en su directorio que han creado. Algunos de los archivos que van a ser copiados van a ser de solo lectura (representando a estos con archivos que realmente son enlaces simbólicos hacia otros archivos). Ustedes no deberían de editar estos archivos. De hecho, si ustedes modifican estos archivos, van a encontrar imposible terminar y completar esta asignación. Vean las instrucciones en el archivo README. Los únicos archivos que tienen permitido modificar para esta asignación son:</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <strong>cool-tree.java</strong>: Este archivo contiene definiciones de los nodos del AST y es el archivo principal de su implementación. Ustedes van a necesitar agregar código para su analizador semántico en este archivo. El analizador semántico es llamado utilizando el método <code>smenat()</code> de la clase <code>programc</code>. No modifiquen las declaraciones existentes.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <strong>ClassTable.java</strong>: Esta clase es un placeholder para algunos métodos útiles (incluyendo reporte de errores e inicialización de las clases básicas). Pueden utilizar este archivo y mejorarlo para su analizador semántico.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <strong>TreeConstants.java</strong>: Este archivo define algunos AbstractSymbol útiles.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <strong>good.cl y bad.cl</strong>: Estos archivos prueban algunas características semánticas de COOL. Ustedes deberían de agregar tests que aseguren que good.cl tome en cuenta combinaciones semánticas legales (tantas como se puedan) y en bad.cl lo contrario combinaciones semánticas ilegales. No es posible tomar en cuenta todas estas combinaciones en un solo archivo, ustedes son responsables de cubrir la mayoría de estas. Expliquen sus pruebas en estos archivos y pongan cualquier comentario en el archivo README.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <strong>SemantErrors.java</strong>: Este archivo contiene métodos que generan los errores correspondientes para el análisis semántico.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <strong>README</strong>: Este archivo contiene instrucciones detalladas para la asignación, así como también un número de recomendaciones útiles. En este archivo deberían de colocar el diseño de su implemetanción y porque su solución es correcta.</li>
</ul>
<h2 id="2-atravesar-el-ast">2. Atravesar el AST<a class="headerlink" href="#2-atravesar-el-ast" title="Permanent link">&para;</a></h2>
<p>Como resultado de la asignación 2, su parser construye un AST. El método <code>dump_with_types</code>, definido en la mayoría de nodos del AST, ilustra como atravesar el AST y reunir información de el. Esto refleja un estilo de algoritmo recursivo para atravesar el árbol. Esto es bastante importante, porque es una manera natural de estructurar varios cálculos en un AST.</p>
<p>Su tarea de programación en esta asignación es, primero atravesar el árbol, segundo manejar varias piezas de información que ustedes reunan del árbol y tercero utilizar esa información para forzar la semántica de COOL. Atravesar el árbol una vez se le suele llamar una "pasada". Ustedes probablemente van a necesitar hacer almenos dos pasadas sobre el AST para verificar todo.</p>
<p>Ustedes van a necesitar agregar información adicional en los nodos del AST. Para hacer esto, van a necesitar editar el archivo <strong>cool-tree.java</strong> directamente.</p>
<h2 id="3-herencia">3. Herencia<a class="headerlink" href="#3-herencia" title="Permanent link">&para;</a></h2>
<p>Las relaciones de herencia especifican un grafo dirigido de dependencias de clases. Un requerimiento típico de la mayoría de lenguajes con herencia es que el grafo de herencia no tenga ciclos. Es responsabilidad de ustedes que su analizador semántico asegure esto. Una manera relativamente fácil de hacer esto, es construir una representación del grafo de tipos y luego verificar los ciclos. ¿Se recuerdan de cómo representabamos un grafo en CC2 y cómo podemos encontrar ciclos?</p>
<p>Adicionalmente, COOL tiene restricciones en heredar de las clases básicas (vean el manual<sup id="fnref2:2"><a class="footnote-ref" href="#fn:2">2</a></sup>). Es también un error si la clase <code>A</code> hereda de la clase <code>B</code> pero la clase <code>B</code> no está definida.</p>
<p>El esqueleto del proyecto incluye definiciones apropiadas de todas las clases básicas. Ustedes van a necesitar incorporar estas clases en el grafo de herencia. Les sugerimos que dividan su análisis semántico en dos pequeños componentes. Primero, verificar que el grafo de herencia esté bien definido, es aceptable abortar la compilación (después de imprimir los errores apropiados en consola, ¡por supuesto!). Segundo, verificar todas las demás condiciones semánticas. Es más fácil de implementar este segundo componente si uno sabe que el grafo de herencia y que este es correcto.</p>
<h2 id="4-scopes-y-variables">4. Scopes y Variables<a class="headerlink" href="#4-scopes-y-variables" title="Permanent link">&para;</a></h2>
<p>Una gran porción del análisis semántico es manejar los nombres de variables. El problema en específico es determinar que declaración está activa para cada uso de una variable o identificador, especialmente cuando un nombre de variable puede ser reutilizado. Por ejemplo, si <code>i</code> es declarado en dos expresiones <code>let</code>, una anidada dentro de la otra, entonces en cualquier momento que <code>i</code> sea referenciado la semántica de COOL especifica que declaración de estas dos está activa. Es trabajo del analizador semántico guardar un registro de que declaración hace referencia a una variable.</p>
<p>Como se discutió en clase, una tabla de símbolos es una estructura de datos conveniente para manejar nombres de variable y scopes. Ustedes pueden utilizar nuestra implementación de una tabla de símbolos para este proyecto. Nuestra implementación provee métodos para entrar, salir y aumentar los scopes como sea posible. Ustedes son libres de implementar su propia tabla de símbolos también, es como ustedes prefieran.</p>
<p>Además del identificador <code>self</code>, que está implicitamente definido en cada clase, hay cuatro maneras que un objeto pueda ser introducido en COOL:</p>
<ol>
<li>Definiciones de atributos de clase.</li>
<li>Parámetros formales en los métodos.</li>
<li>Expresiones let.</li>
<li>Los branches de un case.</li>
</ol>
<p>Adicionalmente a los nombres de variables, hay nombres de métodos y nombres de clases. Es un error utilizar cualquier nombre que no tenga una declaración correspondiente. En este caso, sin embargo, el analizador semántico no debería de abortar la compilación después de descubrir este tipo de errores. Recuerden, ni los métodos, ni las clases, ni los atributos necesitan ser declarados antes de ser utilizados, esto es por ejemplo que dentro del método <code>main</code> se mande a llamar al método <code>foo</code> y este método esté declarado más abajo en el archivo. Piensen cómo esto afecta su análisis semántico.</p>
<h2 id="5-verificacion-de-tipos">5. Verificación de Tipos<a class="headerlink" href="#5-verificacion-de-tipos" title="Permanent link">&para;</a></h2>
<p>La verificación de tipos es otra función principal del analizador semántico. El analizador semántico tiene que verificar que tipos validos sean declarados en donde sea requerido. Por ejemplo, los tipos de retorno de los métodos tienen que ser declarados. Utilizando esta información, el analizador semántico tiene que verificar también que la expresión dentro del método tiene un tipo válido de acuerdo a las reglas de inferencia. Las reglas de inferencia están detalladas en el manual de referencia de COOL<sup id="fnref3:2"><a class="footnote-ref" href="#fn:2">2</a></sup> y también fueron explicadas en clase.</p>
<p>Un problema difícil es que hacer si una expresión no tiene un tipo valido de acuerdo a las reglas. Primero, un error se debería de imprimir con el número línea y una descripción de que fue lo que estuvo mal.</p>
<div class="admonition tip">
<p class="admonition-title">Recomendación</p>
<p>Utilicen la clase de ayuda <strong>SemantErrors.java</strong> para imprimir los errores necesarios durante el análisis semántico.</p>
</div>
<p>Es relativamente fácil dar mensajes de error coherentes, porque generalmente es obvio que error es. Nosotros esperamos que ustedes den mensajes de error informativos de acuerdo a lo que se encuentra en <strong>SemantErros.java</strong>. Segundo, el analizador semántico tiene que tratar de recuperarse y continuar. Nostros si esperamos que su analizador semántico se recupere, pero no esperamos que evite errores en cascada. Un mecanismo de recuperación simple es asignar el tipo <code>Object</code> a cualquier expresión que no se le pueda dar un tipo (nostros utilizamos esto en coolc).</p>
<h2 id="6-interfaz-con-codegen">6. Interfaz con CodeGen<a class="headerlink" href="#6-interfaz-con-codegen" title="Permanent link">&para;</a></h2>
<p>Para que el analizador semántico funcione correctamente con el resto del compilador de COOL, algunas precauciones tienen que tomarse en cuenta para que la interfaz con el generador de código sea correcta. Nostros hemos adoptado una simple e ingenua interfaz para evitar reducir sus impulsos de creatividad en el análisis semántico. Sin embargo, una cosa más tienen que hacer. Para cada nodo expression, su campo de tipo tiene que ser cambiado al <code>Symbol</code> que fue inferido por su analizador semántico. Este <code>Symbol</code> debería de ser el resultado de utilizar el método <code>addString</code> en fases anteriores en la tabla <code>idtable</code>. La expresión especial <code>no_expr</code> tiene que ser asignada con el tipo <code>No_type</code> que es un símbolo predefinido en el esqueleto del proyecto.</p>
<h2 id="7-salida-esperada">7. Salida Esperada<a class="headerlink" href="#7-salida-esperada" title="Permanent link">&para;</a></h2>
<p>Para programas que esten incorrectos semánticamente, la salida de su analizador semántico son mensajes de error. Nosotros esperamos de ustedes que se puedan recuperar de la mayoría de errores exceptuando errores de herencia. También se espera de ustedes que produzcan un mensajes de error informativos de acuerdo a <strong>SemantErros.java</strong> vean este archivo para imprimir los errores. Asumiendo que la herencia está bien formada, el analizador semántico debería de agarrar y reportar todos los errores semánticos en el programa.  </p>
<p>Para programas que estén correctos semánticamente, la salida es un AST anotado. Ustedes van a ser calificados si su analizador semántico anota correctamente el AST con tipos y cuando funcione correctamente con el generador de código de coolc.</p>
<h2 id="8-probando-el-analizador">8. Probando el Analizador<a class="headerlink" href="#8-probando-el-analizador" title="Permanent link">&para;</a></h2>
<p>Van a necesitar un analizador léxico y sintáctico para probar su analizador semántico. Pueden utilizar sus implementaciones a estas fases o utilizar las que nosotros les proveemos. Por defecto, las que nosotros les proveemos son utilizadas, para cambiar este comportamiento tienen que cambiar los archivos <code>lexer</code> y <code>parser</code> con sus propias implementaciones. De todas maneras el autograder principal de este proyecto utiliza los analizadores del compilador de COOL <strong>coolc</strong>.</p>
<p>Ustedes pueden probar su analizador semántico utilizando <code>./mysemant</code>, que es un shell script que "pega" el analizador con las fases anteriores. Noten que <code>./mysemant</code> pueden tomar una bandera -s para depurar el analizador. Utilizar esta bandera hace que la bandera <code>debug</code> se cambie a verdadero, esta está definida en el archivo <strong>Flags.java</strong>. Agregar el código que hace la depuración es su responsabilidad. Vean el README para más detalles.</p>
<p>Una vez que estén bastante confiados de que su analizador está funcionando correctamente, tratan correr <code>./mycoolc</code> para invocar su analizador con todas las fases del compilador. Ustedes deberían de probar este compilador en archivos de entrada buenos y malos, para ver si funciona correctamente. Recuerden, los bugs en el análisis semántico pueden manifestarse en el código generado o solo cuando el programa compilado sea ejecutado con spim<sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup>.</p>
<h2 id="9-observaciones">9. Observaciones<a class="headerlink" href="#9-observaciones" title="Permanent link">&para;</a></h2>
<p>El análisis semántico es la fase más larga y compleja hasta el momento del compilador. Nuestra solución es de aproximadamente 1,300 líneas de código bien documentadas en C++. Ustedes van a encontrar esta asignación fácil si se toman un tiempo para diseñar el verificador de tipos antes de programar. Pregúntense a ustedes mismos lo siguiente:</p>
<ol class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> ¿Qué requerimientos necesito verificar?</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> ¿Cuándo necesito verificar un requerimiento?</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> ¿Cuándo la información es requerida para verificar un requerimiento?</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> ¿Dónde está la información que necesito para verificar un requerimiento?</li>
</ol>
<p>Si ustedes pueden contestar estas preguntas para cada aspecto de COOL, implementar a solución debería de ser <strong>AS EASY AS PIE</strong>.</p>
<h2 id="10-autograder">10. Autograder<a class="headerlink" href="#10-autograder" title="Permanent link">&para;</a></h2>
<p>Ustedes deberían de descargar el siguiente script en el mismo directorio donde tienen sus archivos de la tercera fase:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>wget http://raw.githubusercontent.com/CC-4/cc-4.github.io/master/assets/projects/grading/pa3-grading.pl
chmod +x pa3-grading.pl
</pre></div>
</td></tr></table>

<p>y ejecutar el siguiente comando:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>./pa3-grading.pl
</pre></div>
</td></tr></table>

<p>Esto califica su parser utilizando el analizador léxico de coolc. Si ustedes quieren probar su parser utilizando su fase 1 y 2:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>wget http://raw.githubusercontent.com/CC-4/cc-4.github.io/master/assets/projects/grading/pa3-grading-all.sh
chmod +x pa3-grading-all.sh
</pre></div>
</td></tr></table>

<p>y ejecutar el siguiente comando:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>./pa3-grading-all.sh
</pre></div>
</td></tr></table>

<h2 id="referencias">Referencias<a class="headerlink" href="#referencias" title="Permanent link">&para;</a></h2>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p><a href="http://web.stanford.edu/class/cs143/javadoc/cool_ast/">The Tree Package</a> - Javadoc del paquete Tree.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p><a href="http://web.stanford.edu/class/cs143/materials/cool-manual.pdf">The Cool Reference Manual</a> - Manual de COOL.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:2" title="Jump back to footnote 2 in the text">&#8617;</a><a class="footnote-backref" href="#fnref3:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p><a href="http://web.stanford.edu/class/cs143/materials/cool-tour.pdf">Tour of the Cool Support Code</a> - Manual del Código de Soporte de COOL.&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p><a href="http://web.stanford.edu/class/cs143/materials/SPIM_Manual.pdf">SPIM Manual</a> - Manual de SPIM.&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../proj02/" title="Análisis Sintáctico" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                Análisis Sintáctico
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            CC-4
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/cc-3/MachineStructures" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c648116f.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../../assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="../../js/latex.js"></script>
      
    
  </body>
</html>